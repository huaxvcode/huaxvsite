# 复习脚本

## learn.cpp

```cpp
#include <iostream>
#include <string>
#include <stdlib.h>
#include <stdio.h>
typedef long long var;
typedef __int128 hh;

std::string s = "learn.sh";

// g++ -std=c++20 learn.cpp -o learn && learn
int main(int n, char* ss[]) {
    {
        var on = 1;
        for (var i = 1; i < n; i ++) {
            if (on) s += ' ';
            on = 1; s += ss[i];
        }
        system((char*)s.data());
    }
    return 0;
}
```

## learn.py

```py
import sys
from os import system
import pymysql

db = pymysql.connect(
    host = "localhost",
    port = 3306,
    user = "huaxvubuntu",
    password = "huaxvubuntu",
    database = "learn_db"
)

cr = db.cursor()

def today():
    ls = []
    for i in [0, 1, 2, 4, 8, 16, 32]:
        cr.execute(f"select name from learn_tb where datediff(curdate(), date_create)=%s order by id desc;" % (i, ))
        temp = cr.fetchall()
        for _ in temp:
            ls.append(_)
    return ls

def all():
    ls = []
    cr.execute("select name from learn_tb order by id;")
    for i in cr.fetchall():
        ls.append(i)
    return ls

def insert(s):
    try:
        cr.execute(f'insert into learn_tb (name, date_create) values ("%s", curdate());' % (s, ))
        db.commit()
        print("insert success")
    except:
        db.rollback()
        print("insert error")

def error_exit():
    cr.close()
    db.close()
    exit(0)

# python3 -u learn.py
if __name__ == "__main__":
    args = list(sys.argv)[1:]
    if len(args) == 0:
        error_exit()
    s = ""
    c = args[0]
    for i in args[1:]:
        s += i + " "
    if s:
        s = s[:-1]
    if c == "insert":
        if len(s) == 0:
            error_exit()
        insert(s)
    elif c == "all":
        id = 1
        print("all you have learnt: ")
        for i in all():
            print('\t▫', id, '\t', *i)
            id += 1
    elif c == "today":
        id = 1
        print("today you should learn: ")
        for i in today():
            print('\t▫', id, '\t', *i)
            id += 1
    elif c == "help":
        print("learn all:               list the temp that you have learnt")
        print("learn today:             list the temp that you should learn today")
        print("learn insert string:     insert the new temp thai you should review")
        
    error_exit()
```

## learn.sh

```bash
#!/bin/bash

dn="$0"
# echo $dn
dn=${dn:0:`expr ${#dn}-9`}
# echo $dn

# pwd 
# echo $dn
# if [ `pwd` == $dn ]; then 
#     echo hello the same at hear
# else echo hello the different at hear
# fi;

if [ -e "learn.py" ] && [ ! `pwd` == $dn ]; then
    # echo hello world
    rm learn.py;
    cp "${dn}/learn.py" ./learn.py;
fi;

if [ ! -e "learn.py" ]; then
    cp "${dn}/learn.py" ./learn.py;
fi;

python3 -u learn.py $*;

rm learn.py
```


