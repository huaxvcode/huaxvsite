# 复习脚本

## learn.cpp

```cpp
#include <iostream>
#include <string>
#include <stdlib.h>
#include <stdio.h>
typedef long long var;
typedef __int128 hh;

// std::string s = "learn.sh";

int main(int n, char* ss[]) {
    {
        var on = 1;
        for (var i = 1; i < n; i ++) {
            if (on) s += ' ';
            on = 1; s += ss[i];
        }
        system((char*)s.data());
    }
    return 0;
}
```

## learn.py

```py
from os import system
import os
import sys
from datetime import date
from os import path


# 获取日期对象转成的字符串
def get_date_string(day):
    return day.__format__("%Y %m %d")


# 将字符串列表转成日期对象
def get_date_object(ls_day):
    return date(*[int(i) for i in ls_day])


# 获取到达 0001 年 01 月 01 日的相隔天数
def get_days_from_origin(day):
    return day.toordinal()


# 获取今天的日期对象
def get_today():
    return date.today()


# 将字符串切割成一个一个的单词
def split_string(s):
    ans = []
    res = ''
    empty = [ '\n', ' ', '\f', '\t', '\b', '\r' ]
    for i in s:
        if i in empty:
            if res:
                ans.append(res)
                res = ''
        else:
            res += i
    if res:
        ans.append(res)
    return ans


# 将字符串转成 标题+日期对象
def get_info_and_date(s):
    ls = split_string(s)
    return [ls[0], get_date_object(ls[1:])]


# dir = os.getcwd()
cmd = os.popen('readlink -f ~/huaxv/.lrq_tools')
dir = cmd.readline().split()[0]
cmd.close()
path = dir + '/learn.txt'

def init():
    system('mkdir -p ' + dir)
    run = f'''
        if [ ! -f {path} ]; then
            touch {path};
        fi;
    '''
    system(run)


def read():
    ans = []
    with open(path, encoding="utf-8", mode='r') as f:
        for line in f:
            ans.append(get_info_and_date(line))
    return ans


def write(ls_info):
    with open(path, encoding="utf-8", mode='w') as f:
        ans = ""
        for i, j in ls_info:
            ans += i + ' ' + get_date_string(j) + '\n'
        f.write(ans)
        
    
def insert(info):
    ls = read()
    for i, j in ls:
        if i == info:
            print(info + " has been exist, do you still want to insert? (y or n) ", end='')
            s = input()
            if s == 'y' or s == 'Y':
                ls.insert(0, [info, get_today()])
                write(ls)
            return
    ls.insert(0, [info, get_today()])
    write(ls)


def show_all():
    ls = read()
    ls.reverse()
    cur = 0
    for i, j in ls:
        cur += 1
        print("\t· " + str(cur) + '\t' + i + '\t\t' + get_date_string(j).replace(' ', '-'))


def show_today_should_learn():
    ls = read()
    distance = { 0, 1, 2, 4, 8, 16, 32 }
    cur = 0
    for i, j in ls:
        if get_days_from_origin(get_today()) - get_days_from_origin(j) in distance:
            cur += 1
            print("\t· " + str(cur) + '\t' + i + '\t\t' + get_date_string(j).replace(' ', '-'))


def main():
    init()
    args = sys.argv[1:]
    if len(args) == 0:
        print('learn -h:         get help for the learn exe')
        print('learn -i item:    insert the item you should learn next time')
        print('learn -a:         show all items you have learnt')
        print('learn -t:         show the items you should learn today')
    elif args[0] == '-h':
        print('learn -i item:    insert the item you should learn next time')
        print('learn -a:         show all items you have learnt')
        print('learn -t:         show the items you should learn today')
    elif args[0] == '-t':
        show_today_should_learn()
    elif args[0] == '-a':
        show_all()
    elif args[0] == '-i':
        if len(args) <= 1:
            pass
        res = ""
        on = False
        for i in args[1:]:
            if on:
                res += ' '
            on = True
            res += i
        insert(res)
        
if __name__ == '__main__':
    main()
    
```


