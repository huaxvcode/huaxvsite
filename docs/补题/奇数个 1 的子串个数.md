# [奇数个 1 的子串个数](https://www.luogu.com.cn/problem/U368641)

动态规划，求出以 $i$ 结尾的后缀且含有奇数个 $1$ 的子串个数

```cpp
#include <bits/stdc++.h>
typedef long long var;
typedef __int128 hh;

namespace {

const var N = 5e6;
var n;
std::string s;
var dp_1[N], dp_2[N], dp_0[N];
var dp[N];
// 分别代表 1 ~ i 的后缀子串含有奇数个、偶数个 1 的个数
// dp_0 代表以 i 为末尾的后缀子串的连续 0 的长度
// dp 代表 1 ~ i 含义奇数个 1 的子串个数

// 求含有奇数个 1 的子串个数
void solve() {
    std::cin >> n >> s; s = ' ' + s;
    for (var i = 1; i <= n; i ++) {
        if (s[i] - '0') {
            if (i - 1 == 0) {
                dp_1[i] = 1; continue;
            }
            dp_1[i] = dp_2[i - 1] + 1 + dp_0[i - 1];
            dp_2[i] = dp_1[i - 1];
        }
        else {
            dp_1[i] = dp_1[i - 1];
            dp_2[i] = dp_2[i - 1];
            dp_0[i] = dp_0[i - 1] + 1;
        }
    }
    for (var i = 1; i <= n; i ++) {
        dp[i] = dp[i - 1] + dp_1[i];
    }
    std::cout << dp[n] << '\n';
}

}

// g++ -std=c++20 Main.cpp -o Main && Main
int main() {
    std::ios::sync_with_stdio(0);
    std::cin.tie(0); std::cout.tie(0);
    //int t; std::cin >> t; while (t --)
    solve();
    return 0;
}
```
