---
title: 古典概率
header-includes:
 - \usepackage{fvextra}
 - \DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,commandchars=\\\{\}}
output:
  pdf_document:
    latex_engine: xelatex
    toc: true
    template: C:/Huaxv/Huaxv-Tool/markdown-preview=enhanced/template.tex
    highlight: tango
    path: C:/Users/huaxv/Desktop/古典概率.pdf
---

# 古典概率

『题目』从 $n$ 个不同的物件中取 $r$ 个的不同排列总数是多少？

> 从 $n$ 个中取 $r$ 个有 $C^n_r$ 种取法
>
> 对 $r$ 个进行排列有 $r!$ 种排列方法

$$
ans=P^n_r=\frac{n!}{(n-r)!}
$$

---

『题目』从 $n$ 个不同的物件中选 $r$ 个，有多种不同的取法？

$$
ans=C^n_r=\frac{n!}{r!(n - r)!}
$$

---

『题目』将 $n$ 个不同的物件分成 $k$ 堆，各堆物件数分别是：$r_1, r_2, \cdots, r_k$，有多少种分法？

![k堆图片](./img/k堆图片.png)

> 想象成 $n$ 个座位，其中第 $r_i$ 与 $r_{i + 1}$ 座位之间有隔道，那么对 $n$ 个学生全排列有 $n!$ 种排列方法，对于每一种排列方法，会产生 $r_1!r_2! \cdots r_k!$ 种重复，所以实际上不同的分堆种类有：

$$
\frac{n!}{r_1! r_2! \cdots r_k!}
$$

---

『题目』有 $N$ 个产品，其中有 $M$ 个废品，现从中取出 $n$ 个，问这 $n$ 个中存在 $m$ 个废品的概率是多少？

> 总共有 $C^N_n$ 种取法，取出 $m$ 个废品，这 $m$ 个废品的组合有 $C^M_m$ 种，剩下需要从 $N - M$ 中取出 $n - m$ 个产品，有 $C^{N-M}_{n-m}$ 种取法，所以答案为：

$$
\frac{C^M_m C^{N-M}_{n-m}}{C^N_n}
$$

---

『题目』有 $n$ 双不同的鞋，现在需要你随机分成 $n$ 堆，每堆有 $2$ 个鞋子，问每一堆鞋都自成一对的概率是多少？

> 总共有 $2n$ 个位置，有 $(2n)!$ 种随机排列方法；
>
> 总共有 $n$ 双鞋，有 $n!$ 种排列方法，由于每一堆都有 $2!$ 排列方法，所以总共有 $n!2^n$ 种可以自成一对的排列方法，概率为：

$$
\frac{n!2^n}{(2n)!}
$$

---

『题目』有 $n$ 个男孩，$m$ 个女孩随机的**排成一列**，其中 $m \leq (n + 1)$，问任意两个女孩都不相邻的概率是多少？

> 有 $n$ 个男孩，就有 $n + 1$ 个空位，从 $n + 1$ 个空位中选出 $m$ 个给女生坐，而这 $m$ 个女生又可以有 $m$ 种不同的排列方法，所以女生总共有 $C^{n + 1}_m * m!$ 种坐法
>
> 对于第一个女生可以选择 $n + 1$ 个座位，第二个女生可以选择 $n + 2$ 个座位，一直到第 $m$ 个女生可以选择 $n + m$ 个座位，所以总共有 $(n+1)(n+2)\cdots(n+m)=\frac{(n+m)!}{n!}$ 种选法
>
> 概率为：

$$
\frac{C^{n+1}_{m} * m!}{\frac{(n+m)!}{n!}}=\frac{C^{n+1}_{m}}{C^{n+m}_{m}}
$$

另外一种理解方法：

> 先对这 $n$ 个男生自由排列，有 $n!$ 种排列方式，然后在 $n + 1$ 个位置中选出 $m$ 个位置自由排列，有 $P^{n+1}_{m}$ 种排列方式，所以女生互不相邻的排列方式有 $n!P^{n+1}_{m}$ 种
>
> 事件总和为 $n + m$ 个孩子的自由组合，有 $(n+m)!$ 种排列方式，所以概率为：

$$
\frac{n!P^{n+1}_{m}}{(n+m)!}=\frac{C^{n+1}_{m}}{C^{n+m}_{m}}
$$

---

『题目』有 $n$ 个男孩，$m$ 个女孩随机的**排成一圈**，其中 $m \leq n$，问任意两个女孩都不相邻的概率是多少？

> 将 $n$ 个不同的物品排成一列，有 $n!$ 种排列方法
>
> 将 $n$ 个不同的物品排成一圈，有 $\frac{n!}{n}$ 种排列方法，在排成一列的基础上，每一种排列因为开头设置不同会有 $n$ 种开头方式导致重复，所以要除以 $n$
>
> 回到题目，先对 $n$ 个男的围成一圈，有 $\frac{n!}{n}$ 种排列方法，从 $n$ 个相间位置中选取 $m$ 个，有 $C^n_m$ 种选法，女生可以对这 $m$ 个位置自由排列，所以满足任意两个女生不相邻的排列方式有 $\frac{n!m!C^n_m}{n}$ 种
>
> 这 $n + m$ 个孩子围成一圈总共有 $\frac{(n+m)!}{n+m}$ 种方式
>
> 概率为：

$$
\frac{\frac{n!m!C^n_m}{n}}{\frac{(n+m)!}{n+m}}=\frac{C^n_m * (n+m)}{C^{n+m}_m * n}=\frac{C^n_m}{C^{n+m-1}_m}
$$

---

『题目』一个人在口袋里放了 $2$ 盒火柴，每盒 $n$ 支，每次抽烟时从口袋随机拿出一盒（抽出甲盒或乙盒）并用掉一支烟，到某次他迟早会发现：取出的那一盒空了，问这时候另外一盒恰好有 $m$ 支火柴的概率是多少？

> 每一次抽取只有等概率两种选择，要么抽甲的，要么抽乙的，抽到一定时候，会发现抽到盒子里面没有烟了，这种概率是否符合一棵超级庞大的概率树呢？
>
> 由于发现某盒为空时就会停止，说明这棵概率树并不是一颗完全树，即叶子节点并不都处于同一层，但是我们可以添加虚拟节点来延长比较短的那个分支，让这棵树的叶子节点都处于同一层，计算概率时只需要统计由这个叶子节点引发的虚拟叶子节点的个数占总叶子节点的个数多少就可以求出该叶子节点引发的概率了
>
> 回到题目，要有利于题目条件的发生，则必须要抽 $2n - m + 1$ 次才能发现某盒已经空了，且剩下那一盒有 $m$ 支烟
>
> 所以总共的抽取方法有 $2 ^ {2n - m + 1}$ 种（每一次要么抽甲要么抽乙，等概率抽取）
>
> 最后一盒要么是甲空要么是乙空，所以有 $2$ 种镜像对称的结果，因为最后一次一定要抽取空盒，所以在 $2n - m$ 次中，需要分割成两份，第一份有 $n$ 个，第二份有 $n - m$ 个，有 $C^{2n-m}_{n}$ 种分法，有利于题目事件发生的概率为：

$$
\frac{2 * C^{2n-m}_{n}}{2 ^ {2n - m + 1}}=\frac{C^{2n-m}_{n}}{2n - m + 1}
$$

---

『题目』有 $21$ 本不同的书，随机地分给 $17$ 个人，问 $6$ 个人得 $0$ 本，$5$ 个人得 $1$ 本，$2$ 人得 $2$ 本，$4$ 人得 $3$ 本这个事件发生的概率是多少？

> 事件总和有 $17 ^ {21}$
>
> 若要有利于题目事件发生，需要对 $17$ 分组，第一组分出 $6$ 人，第二组分出 $5$ 人，第三组分出 $2$ 人，第四组分出 $4$ 人，有 $\frac{17!}{6!5!2!4!}$ 种分法；要将 $21$ 本书分成 $3$ 组，每组分别有 $\{5, 4, 12\}$ 本书，有 $\frac{21!}{5!4!12!}$ 种分法，对于第一组 $5$ 需要按个数 $1$ 排列有 $5!$ 种排列方法，对于第二组 $4$ 需要按照个数 $2$ 排列有 $\frac{4!}{2!2!}$ 种排列方法，对与第三组 $12$ 需要按照个数 $3$ 排列有 $\frac{12!}{3!3!3!3!}$ 种排列方法
>
> 有利于题目事件发生的概率为：

$$
\frac{\frac{17!}{6!5!2!4!} * \frac{21!}{5!4!12!} * 5! * \frac{4!}{2!2!} * \frac{12!}{3!3!3!3!}}{17 ^ {21}}=\frac{17!21!}{{2!}^3 {3!}^4 4! 5! 6! 17^{21}}
$$

---

『题目』$n$ 本书随机地分给甲、乙二人，问甲、乙各至少得到 $1$ 本书的概率是多少？

> 事件总数有 $2 ^ n$ 种
>
> 不利于题目事件发生，也就是甲得到 0 本或者乙得到 0 本，有 $2$ 种，所以有利于题目事件发生的概率为：

$$
1 - \frac{1}{2 ^ {n - 1}}
$$

---

『题目』甲、乙两人下棋，每局甲胜的概率为 $a$，乙胜的概率为 $b$，假设没有和局的情况发生这意味着 $a+b=1$ ，由于 $a > b$ 为了考虑公平性，最终决定胜负规则如下：到什么时候为止，甲连胜三局则甲胜；到什么时候为止，乙连胜两局则乙胜；问甲最终胜的概率？

> 如果到达某一轮时，是甲赢，假设此时是第 $n$ 轮，如果甲最终赢，则后缀一定是 "甲甲甲"，为了方便研究，记 $E$ 为当前轮次甲赢，记 $F$ 为当前轮次乙赢，则后缀一定是 $EEE$ 且前面 $n-3$ 轮不能出现 $EEE$ 和 $FF$ 且最后一个必定是 $F$，这种概率是多少呢？这种概率当然用「线性dp」来解，那能不能用一条公式求解呢？仔细想想，不能出现连续的 $EEE$ 和 $FF$ 说明该序列一定是由 $E$、$EE$、$F$ 组合，且 $E$ 和 $EE$ 不能连续出现，$F$ 与 $F$ 之间也不能连续出现;
> 
> $E$ 发生的概率为 $a$，$EE$ 发生的概率为 $a^2$，$F$ 发生的概率为 $b$

